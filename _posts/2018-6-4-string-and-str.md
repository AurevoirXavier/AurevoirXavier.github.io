---
layout: post
title: "String and &str"
date:   2018-06-04
excerpt: "String 与 &str"
tags: [Rust]
comments: true
---

<center><h2>String 与 &amp;str</h2></center>

<!--more-->

#### 这里我们需要先谈一谈 *Rust* 中的字符类型。

相信从别的编程语言来的人基本都很熟悉 `String` 这个类型，但是到了 *Rust* 中它就有了些变化。而且还有一个 `str` 类型来表示字符串，这就让刚接触 *Rust* 的人有些困扰。

首先 `str` 的官方名字叫做字符串字面值，它是被硬编码进程序中的，说到这里你应该清楚，它是不可变的。所以我们需要多一个字符串类型来满足其他需求，比如说灵活修改内容还有获取用户输入（外来输入这意味着一开始并不知道确切的内容是什么），这就有了 `String`。

这时候你可能会说同样任务交给 `String` 都能完成，`str` 有什么理由的存在，这时候就要说一下它们的内存分配方式了：

- 对于 `str`，在编译时就知道其内容所以它直接被硬编码进最终的可执行文件中，所以它快速且高效。
- 对于 `String`，为了支持一个可变，可增长的文本片段，需要在堆上分配一块在编译时未知大小的内存来存放内容。这意味着：
  1. 内存必须在运行时向操作系统请求。
  2. 需要一个当处理完 `String` 时将内存返回给操作系统的方法。

